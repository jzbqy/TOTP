# TOTP验证码助手

纯本地的TOTP验证码生成器浏览器扩展，由AI模型生成，参考了https://github.com/madrays/MoviePilot-Plugins项目的部分代码，感谢。

## 功能特点

- **纯客户端**：所有数据存储在浏览器本地，无需服务器
- **智能检测**：自动检测验证码输入页面并显示面板
- **智能填充**：根据页面类型智能决定是否自动填充
- **多站点支持**：可配置多个站点的TOTP密钥
- **实时更新**：验证码每30秒自动更新，带进度条显示
- **数据管理**：支持配置的导入导出、二维码导入、Google验证器导入
- **拖拽面板**：验证码面板可自由拖拽定位

## 安装方法

1. 打开Chrome浏览器
2. 进入扩展管理页面 (chrome://extensions/)
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本文件夹

## 使用方法

### 添加站点

**方法一：通过弹窗添加**
1. 点击扩展图标打开弹窗
2. 点击"设置"按钮进入管理页面
3. 填写站点信息并保存

**方法二：在设置页面自动检测**
1. 访问网站的两步验证设置页面
2. 插件会自动检测TOTP密钥并显示添加面板
3. 确认信息后保存

### 验证码使用

**自动填充场景：**
- **独立验证页面**：自动检测并填充验证码
- **特殊域名**：任何页面检测到验证码输入框都会自动填充
- **设置页面（未开启2FA）**：显示验证码面板时自动填充

**手动操作场景：**
- **设置页面（已开启2FA）**：只显示面板，不自动填充，防止干扰
- 点击"复制"按钮复制验证码
- 点击"填充"按钮手动填充到输入框

### 数据管理

- **导出配置**：备份所有站点配置到JSON文件
- **导入配置**：从JSON文件恢复配置
- **导入二维码**：批量从二维码图片导入站点
- **导入Google验证器**：从Google验证器导出的二维码导入

## 智能填充逻辑

插件会根据不同页面类型采用不同策略：

1. **安全设置页面** (`action=security`)
   - 已开启2FA：自动清空输入框，防止浏览器自动填充干扰
   - 未开启2FA：显示配置面板或验证码面板

2. **独立验证页面**
   - 自动检测验证码相关页面
   - 自动填充验证码

3. **特殊域名处理**
   - 任何页面有验证码输入框就自动填充

## 安全说明

- 所有TOTP密钥存储在浏览器本地存储中
- 不会向任何服务器发送数据
- 建议定期导出配置进行备份
- 请妥善保管导出的配置文件

**支持的输入框类型：**
- 标准验证码输入框
- 特殊样式输入框
- 最大长度为6位或8位的输入框

## 常见问题

**Q: 为什么有些页面不自动填充？**
A: 插件会智能判断页面类型，在设置页面等场景下不会自动填充，避免干扰用户操作。

**Q: 如何处理浏览器自动填充干扰？**
A: 插件会在特定页面自动清空浏览器的自动填充内容，保持输入框干净。

**Q: 验证码面板可以移动吗？**
A: 可以，直接拖拽面板到任意位置。
